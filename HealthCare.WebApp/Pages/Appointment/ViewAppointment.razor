@page "/appointment"
@inject AppointmentService appointmentService
@inject IJSRuntime JSRuntime

<h3>View Appointment Details</h3>

<label for="appointmentId">Appointment ID:</label>
<input id="appointmentId" @bind="appointmentId" />

<button @onclick="LoadAppointment">View Details</button>

@if (appointmentDetails != null)
{
    <p>@appointmentDetails.Details</p>
}

<div id='calendar'></div>

@code {
    private string appointmentId;
    private AppointmentService.AppointmentDetails appointmentDetails;

    private void LoadAppointment()
    {
        appointmentDetails = appointmentService.GetAppointmentDetails(appointmentId);
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("initializeCalendar");
        }
    }
}
